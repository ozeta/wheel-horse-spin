<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wheel Horse Spin Game</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="cyberpunk.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body class="landing-page">
    <header class="menu-bar">
        <h1>The Wheel Horse Spin Game</h1>
    </header>
    <main class="landing-main">
        <section class="landing-row">
            <article class="landing-card landing-card--full">
                <h2>Single-Player Sprint</h2>
                <p><strong>Summary:</strong> Procedural p5.js race you run locally, with customizable horses, dynamic lane geometry, and persistent stats stored in-browser.</p>
                <p><strong>How to play:</strong> Add up to ten horse names, press <em>Run Race</em>, and watch the leaderboard; pause or reset anytime and use <em>Share URL</em> to invite friends.</p>
                <p>You can change player names and customize horses before starting the race using the url parameter.</p>
                <p>
                    Classic local race mode rendered with p5.js. Manage your horses, run laps, and
                    export stats directly in the browser.
                </p>
                <div class="landing-actions">
                    <a class="game-link-button" href="single-player-game.html?horses=marco,giacomo,giovanni,maurizio,deba,sooraj">Play Single-Player</a>
                </div>
            </article>
        </section>
        <section class="landing-row">
            <article class="landing-card landing-card--full">
                <h2>Multiplayer Arena</h2>
                <p><strong>Summary:</strong> WebSocket-powered lobby with bots filling empty lanes, rotating boost keys, and Postgres-backed leaderboards tracking wins and last-place tolls.</p>
                <p><strong>How to play:</strong> Start the Node server in <code>multiplayer-race/</code>, pick a username here, open the client, connect to a room, ready up, and hit boosts as the key rotates every 3 seconds.</p>
                <p>
                    Join the WebSocket lobby, survive the rotating boost key, and avoid being the last
                    human finisher. Requires the Node server from <code>multiplayer-race/</code>.
                </p>
                <div class="landing-input-group">
                    <label for="landing-username">Choose a username</label>
                    <input id="landing-username" type="text" placeholder="e.g. BlitzRunner" value="demo" autocomplete="off" />
                </div>
                <div class="landing-actions">
                    <a id="landing-open-mp" class="game-link-button" href="game.html?room=demo&name=demo">Open Multiplayer Client</a>
                </div>
            </article>
        </section>
        <section class="landing-row">
            <article class="landing-card landing-card--full">
                <h2>Documentation & Repo</h2>
                <ul class="landing-list">
                    <li><a href="readme.md">Project README</a></li>
                    <li><a href="multiplayer-race/README.md">Multiplayer server setup guide</a></li>
                    <li><a href="multiplayer-race/api-docs.html">REST API (Swagger UI)</a></li>
                    <li><a href="multiplayer-race/DATABASE_SETUP.md">Database setup notes</a></li>
                    <li><a href="https://github.com/ozeta/wheel-horse-spin" target="_blank" rel="noopener">GitHub repository</a></li>
                </ul>
            </article>
        </section>
    </main>
    <footer class="landing-footer">
        <span>&copy; Wheel Horse Spin - By Marco Carrozzo</span>
    </footer>
    <script>
        (function updateMultiplayerLink() {
            const usernameInput = document.getElementById('landing-username');
            const mpLink = document.getElementById('landing-open-mp');
            const room = 'demo';

            if (!usernameInput || !mpLink) return;

            const buildHref = (rawName) => {
                const name = (rawName || '').trim() || 'demo';
                const params = new URLSearchParams({ room, name });
                return `game.html?${params.toString()}`;
            };

            const render = () => {
                mpLink.href = buildHref(usernameInput.value);
            };

            usernameInput.addEventListener('input', render);
            usernameInput.addEventListener('change', render);
            render();
        })();
    </script>
</body>
</html>
